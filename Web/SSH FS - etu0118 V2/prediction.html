<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CARGOOO! – Prédictions</title>

  <!-- police + feuille globale déjà utilisées sur le site -->
  <link href="https://fonts.googleapis.com/css2?family=Belanosima:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/style.css" />

   <!-- CSS -->
<link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet"/>

<!-- JS + token directement dans l’URL -->
<script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js?access_token=pk.eyJ1IjoibWVjYWRlYyIsImEiOiJjbWMwa3E3enEwMTY4MmtwajlybTI0cHBvIn0.ViQ5X-5mq08GAYbszceg8A"></script>


  <!-- modules utilitaires communs -->
  <script type="module" src="js/utils.js"></script>
  <script type="module" src="js/api.js"></script>
</head>
<body>
  <!-- ═════ NAVBAR partagée ═════ -->
  <nav class="navbar">
    <a href="index.html"><img src="../assets/LOGO__CARGOOO.png" alt="Logo" class="logo" /></a>
    <ul class="nav-links">
      <li><a href="index.html">Accueil</a></li>
      <li><a href="visualisation.html">Visualisation</a></li>
      <li><a href="ajout.html">Ajout Données</a></li>
      <li><a href="prediction.html">Prédiction</a></li>
    </ul>
  </nav>

  <main id="add-data-page">
    <h2>Prédictions de trajectoire &amp; type</h2>

    <!-- Sélecteur navire -------------------------------------------------- -->
    <div class="form-container" id="selector-card">
      <h3 class="mb-3 text-center">Choisir un navire</h3>
      <form id="shipChooser" class="d-flex flex-column gap-2"></form>
      <div id="shipPager" class="d-flex justify-content-center gap-3 mt-3">
        <button type="button" id="prevBtn" class="btn btn-sm btn-outline-primary">&laquo;</button>
        <span id="pageInfo" style="min-width:4ch;text-align:center"></span>
        <button type="button" id="nextBtn" class="btn btn-sm btn-outline-primary">&raquo;</button>
      </div>
      
    </div>
    <a id="typeBtn" class="btn btn-primary" href="#">Prédire type</a>
    <a id="trajBtn" class="btn btn-primary" href="#">Prédire trajectoire</a>
    
    </div>
  </main>

  <script type="module">
  import { chooser } from '../js/predict.js';  // déjà existant
    
    function currentMMSI() {
      return chooser.querySelector('input[name="mmsi"]:checked')?.value;
    }
    
    const typeBtn = document.getElementById('typeBtn');
    const trajBtn = document.getElementById('trajBtn');
    
    chooser.addEventListener('change', () => {
      const id = currentMMSI();
      typeBtn.href = `type_result.html?mmsi=${id}`;
      trajBtn.href = `trajectory_result.html?mmsi=${id}`;
    });
    
    /* première mise à jour */
    chooser.dispatchEvent(new Event('change'));
    </script>
  
</body>
</html>